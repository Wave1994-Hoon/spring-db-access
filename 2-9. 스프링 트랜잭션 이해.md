## 2-9. 스프링 트랜잭션 이해
### PlatformTransactionManager
스프링은 PlatformTransactionManager 인터페이스를 통해 트랜잭션을 추상화한다.

```java
public interface PlatformTransactionManager extends TransactionManager {
  TransactionStatus getTransaction(@Nullable TransactionDefinition definition) throws TransactionException;
  void commit(TransactionStatus status) throws TransactionException;
  void rollback(TransactionStatus status) throws TransactionException;
}
```

![image](https://user-images.githubusercontent.com/60383031/183298961-c2eba277-56f3-455f-a4c5-fc31625dd7dd.png)

스프링 부트는 어떤 데이터 접근 기술을 사용하는지를 자동으로 인식해서 적절한 트랜잭션 매니저를 선택해서 스프링 빈으로 등록한다.

스프링 5.3 부터는 JDBC 트랜잭션을 관리할 때 `DataSourceTransactionManager` 를 상속받아서 약간의 기능이 확장 된 `JdbcTransactionManager` 를 제공한다.

<br>

### 스프링 트랜잭션 사용 방식
#### 선언적 트랜잭션 관리(Declarative Transaction Management)
`@Transactional` 를 사용한 방식

#### 프로그래밍 방식의 트랜잭션 관리(programmatic transaction management)
트랜잭션 매니저 또는 트랜잭션 템플릿 등을 사용해서 트랜잭션 관련 코드를 직접 작성

<br>

### 프록시
![image](https://user-images.githubusercontent.com/60383031/183449364-e428541a-edd3-4105-bf6b-52cc0db0311c.png)

#### 동작 방식
- 트랜잭션은 커넥션에 `con.setAutocommit(false)` 지정하고 시작
- 스프링 내부에서는 트랜잭션 동기화 매나저를 사용하여 같은 트랜잭션이 같은 커넥션을 사용하도록 해준다.

#### 트랜잭션 적용 확인
현재 쓰레드에 트랜잭션이 적용되어 있는지 확인할 수 있는 기능
```java
TransactionSynchronizationManager.isActualTransactionActive()
```

<br>

### 우선순위
```



